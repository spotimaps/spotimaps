(this.webpackJsonpspotimaps=this.webpackJsonpspotimaps||[]).push([[0],{27:function(e,t,o){e.exports=o(46)},32:function(e,t,o){},34:function(e,t,o){},37:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAA6pJREFUeJzlm81vDVEYh5+qtIlQFFVUpD5C4g+Q2BLiK218LAQbNoqmSMUCCUGiEWFDLCwkPhIJf4HYSNto2ZFYiIgggn63iWpvW4tjGO/MvfN15s6cO79kFufc8773vE/u/Z25Z86F9KoKeJD0JJLSeuADMJX0RIqtcuACkEMVnykA9UAn/wrPFID9wCDO4ksegGV0boWXPAC70WUKgJvRZQZAPqMLAqAN2AnML8J8taqQ0QUBYPXngOdAEzAr5rlHkh+jCwPAfg0DV0nhp8Kv0UUFYF1DwEmUzySqoEYXBMBFoB2YKBDTDSyPpTIfCmN0YVaBRcAp4GOeuAFgm9bKfCis0YUBYGk6ygi/ucTmgINaKvNQVKOLAsBSNfDQJX6SmCHoMDodACw1AWMiRw7YEaa4QtJpdDoBAGwFfoo8A8CqkPkc0m10ugGAgjAucr1CwxIZh9HFAQDgiEu+03JQsQrRBaAmIIRHIt+wzJF0gUEBjAF3gFqfABYAPSLnDZMBWP19QINPCMdEzhFgtukAplBrfJMPABXAJxHbUgoALAi7fEA4I+I6TQXQAvwSYwaBOg8AS1Cw7OBqTQQAsMkFwj0PAAAvRMweUwGA09hywFIPAFdEzPVpHgFp1i3gta1dDuz1iOkW7TUmA5gEbou+DR4x70R7BST/EQ/7FQBYLcZ+9hhfLcb3lfl4k6RVVuC1SmDU1h5Hrfn5VIEyz7/jTf4KaJHpAOpF+7vH+JmiPWI6gI2i/cZjvLxZ6jEZwDTgsOh75hGzUrTfmwygGVhra+dQm6KFtE6030Lyy1yYZXALzo3Pux7FA3SJmN0mAmjFudfXDyz2KL4O54+hhSYCkK9PAI0exQOcE3Ht+RKm7SoEYAI45KP4SuCLiG02HcAP1Na3H7WInEOop1lGAhgFbuL/LEANav/QnvOafUDSBQYFMM9n4ZYei3yDRDxIsQ9zHow0u+RrjZgTUPfgHS7J0wSgAedzyy40nh4pB867vEkaADSivMKep58/GyC6lbbH4ydw3iiN43/FCKUq4D7JAqgBnrjETwIHohQXRHEYpJcqgONAr0vsOEUs3pJug8ynZcBZ4GueuF5gs9bKAkinQUq1AS/5/4eNvDpQgBJXsQ9KDgBHSdlWX1SDlHIb0w9cBubGWEdkhTVIKat/DHiKOgI3I+a5a1MYg5S6BGwH5hRhvrEoqEGWrDL7lxm7/BhkJlTIIDOjfAaZKbkZZCaV2T9P22UZZKz6DcQ/zHbG03MJAAAAAElFTkSuQmCC"},38:function(e,t,o){},45:function(e,t,o){},46:function(e,t,o){"use strict";o.r(t);var n,a=o(0),i=o.n(a),r=o(11),c=o.n(r),s=(o(32),o(9)),l=o(48),u=o(50),m=(o(33),o(47)),A=o(49),g=(o(34),function(e){var t=e.info,n=Object(a.useState)(""),r=Object(s.a)(n,2),c=r[0],l=r[1];return Object(a.useEffect)((function(){t.audio&&l(new Audio(t.audio))}),[t]),i.a.createElement(A.a,{onClose:function(){c.duration>0&&!c.paused&&c.pause()}},i.a.createElement("div",{className:"marker-wrapper"},i.a.createElement("div",{id:"song"},i.a.createElement("b",null,t.name),i.a.createElement("img",{id:"speaker",src:o(37),alt:"speaker",width:"12",height:"12",onClick:function(){c.play()}})),i.a.createElement("div",{id:"artist"},i.a.createElement("b",null,t.artist)),t.img&&i.a.createElement("img",{src:t.img.url,alt:"album",className:"image"})))}),p=function(e){var t=e.info,o=e.lat,n=e.lng,a=function(){return console.log(void 0===t.color?"#1DB954":t.color),void 0===t.color?"#1DB954":t.color};return i.a.createElement(m.a,{center:[o,n],radius:5,fill:!0,color:a(),fillColor:a(),fillOpacity:"1"},i.a.createElement(g,{info:t}))},d=function(e){var t=e.data,o=e.center,n=Object(a.useState)(13),r=Object(s.a)(n,1)[0];return i.a.createElement(l.a,{center:o,zoom:r},i.a.createElement(u.a,{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png"}),t.map((function(e){return i.a.createElement(p,Object.assign({key:e.id},e))})))},f=(o(38),o(8)),h=o.n(f),w=function(){h.a.fire({icon:"error",title:"Oops...",text:"You need to give location permissions!",footer:'<a href="https://support.google.com/chrome/answer/114662">Why do I have this issue?</a>'})},E=o(26),S=o(25),v=o(15),b=(o(39),o(41),function(e){var t=(n=v.firestore()).collection("songs"),o=[];t.onSnapshot((function(t){t.docChanges().forEach((function(t){o=[].concat(Object(S.a)(o),[Object(E.a)({},t.doc.data(),{id:t.doc.id})]),e(o)}))}))}),B=function(e){fetch("https://d223092c.ngrok.io/sentiment/".concat(e.info.name,"/").concat(e.name.artist)).then((function(e){return e.text()})).then((function(t){e.info.color=t,n.collection("songs").add(e).then((function(){console.log("Song Added!",e),h.a.fire({icon:"success",title:"Song Added!",text:"Thanks for joining Spotimaps."})})).catch((function(e){h.a.fire({icon:"error",title:"Error",text:"Something seems to have gone wrong :("}),console.error("Error writing document: ",e)}))})).catch((function(t){n.collection("songs").add(e).then((function(){console.log("Song Added!",e),h.a.fire({icon:"success",title:"Song Added!",text:"Thanks for joining Spotimaps."})})).catch((function(e){h.a.fire({icon:"error",title:"Error",text:"Something seems to have gone wrong :("}),console.error("Error writing document: ",e)}))}))},k=(o(45),function(){console.log("Version 4.1.4");var e=Object(a.useState)([]),t=Object(s.a)(e,2),o=t[0],n=t[1],r=Object(a.useState)([34.42,-119.99]),c=Object(s.a)(r,2),l=c[0],u=c[1];return Object(a.useEffect)((function(){var e=new URLSearchParams(window.location.search);navigator.geolocation.getCurrentPosition((function(t){u([t.coords.latitude,t.coords.longitude]),function(e,t){null!==e&&fetch("https://spotimaps.appspot.com/token?code="+e).then((function(e){return e.json()})).then((function(e){var o=new Headers;o.append("Authorization","Bearer "+e.access_token),fetch("https://api.spotify.com/v1/me/player/currently-playing",{method:"GET",headers:o,redirect:"follow"}).then((function(e){return e.json()})).then((function(e){B({info:{name:e.item.name,audio:e.item.preview_url,img:e.item.album.images[0],artist:e.item.artists[0].name},lat:t.coords.latitude,lng:t.coords.longitude})}))}))}(e.get("code"),t)}),w),b(n),null===e.get("code")&&h.a.fire({html:'\n<div class="start-modal--wrapper">\n    <h1>Welcome to Spotimaps!</h1>\n    <img src="./img1.png" style="width:100%; margin: 0 auto;"> <br/>\n    Click around to see what people are listening to and Login with Spotify to add your own! <br/>\n</div>\n',confirmButtonText:"Log into Spotify",showCancelButton:!0}).then((function(e){e.value&&(window.location.href="https://spotimaps.appspot.com/login")}))}),[]),i.a.createElement("div",{className:"site-wrapper"},i.a.createElement(d,{data:o,center:l}))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));v.initializeApp({apiKey:"AIzaSyBwYM4XJ0a_SwikgEaAXFIm5WCvG4x623k",authDomain:"spotimaps-44ae9.firebaseapp.com",databaseURL:"https://spotimaps-44ae9.firebaseio.com",projectId:"spotimaps-44ae9",storageBucket:"spotimaps-44ae9.appspot.com",messagingSenderId:"230927739844",appId:"1:230927739844:web:819c98bc082e1bd1015291",measurementId:"G-4D8G2Y42EX"}),c.a.render(i.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[27,1,2]]]);
//# sourceMappingURL=main.d0e7c9a6.chunk.js.map