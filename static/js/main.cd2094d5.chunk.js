(this.webpackJsonpspotimaps=this.webpackJsonpspotimaps||[]).push([[0],{27:function(e,t,a){e.exports=a(46)},32:function(e,t,a){},34:function(e,t,a){},35:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEwAACxMBAJqcGAAAA6pJREFUeJzlm81vDVEYh5+qtIlQFFVUpD5C4g+Q2BLiK218LAQbNoqmSMUCCUGiEWFDLCwkPhIJf4HYSNto2ZFYiIgggn63iWpvW4tjGO/MvfN15s6cO79kFufc8773vE/u/Z25Z86F9KoKeJD0JJLSeuADMJX0RIqtcuACkEMVnykA9UAn/wrPFID9wCDO4ksegGV0boWXPAC70WUKgJvRZQZAPqMLAqAN2AnML8J8taqQ0QUBYPXngOdAEzAr5rlHkh+jCwPAfg0DV0nhp8Kv0UUFYF1DwEmUzySqoEYXBMBFoB2YKBDTDSyPpTIfCmN0YVaBRcAp4GOeuAFgm9bKfCis0YUBYGk6ygi/ucTmgINaKvNQVKOLAsBSNfDQJX6SmCHoMDodACw1AWMiRw7YEaa4QtJpdDoBAGwFfoo8A8CqkPkc0m10ugGAgjAucr1CwxIZh9HFAQDgiEu+03JQsQrRBaAmIIRHIt+wzJF0gUEBjAF3gFqfABYAPSLnDZMBWP19QINPCMdEzhFgtukAplBrfJMPABXAJxHbUgoALAi7fEA4I+I6TQXQAvwSYwaBOg8AS1Cw7OBqTQQAsMkFwj0PAAAvRMweUwGA09hywFIPAFdEzPVpHgFp1i3gta1dDuz1iOkW7TUmA5gEbou+DR4x70R7BST/EQ/7FQBYLcZ+9hhfLcb3lfl4k6RVVuC1SmDU1h5Hrfn5VIEyz7/jTf4KaJHpAOpF+7vH+JmiPWI6gI2i/cZjvLxZ6jEZwDTgsOh75hGzUrTfmwygGVhra+dQm6KFtE6030Lyy1yYZXALzo3Pux7FA3SJmN0mAmjFudfXDyz2KL4O54+hhSYCkK9PAI0exQOcE3Ht+RKm7SoEYAI45KP4SuCLiG02HcAP1Na3H7WInEOop1lGAhgFbuL/LEANav/QnvOafUDSBQYFMM9n4ZYei3yDRDxIsQ9zHow0u+RrjZgTUPfgHS7J0wSgAedzyy40nh4pB867vEkaADSivMKep58/GyC6lbbH4ydw3iiN43/FCKUq4D7JAqgBnrjETwIHohQXRHEYpJcqgONAr0vsOEUs3pJug8ynZcBZ4GueuF5gs9bKAkinQUq1AS/5/4eNvDpQgBJXsQ9KDgBHSdlWX1SDlHIb0w9cBubGWEdkhTVIKat/DHiKOgI3I+a5a1MYg5S6BGwH5hRhvrEoqEGWrDL7lxm7/BhkJlTIIDOjfAaZKbkZZCaV2T9P22UZZKz6DcQ/zHbG03MJAAAAAElFTkSuQmCC"},38:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var n,o=a(1),i=a.n(o),r=a(10),c=a.n(r),s=(a(32),a(8)),l=a(48),u=a(50),A=(a(33),a(47)),m=a(49),p=(a(34),function(e){var t=e.info;return i.a.createElement("div",{className:"marker-wrapper"},i.a.createElement("div",{id:"song"},i.a.createElement("b",null,t.name),i.a.createElement("img",{id:"speaker",src:a(35),alt:"speaker",width:"12",height:"12",onClick:function(){t.audio&&new Audio(t.audio).play()}})),i.a.createElement("div",{id:"artist"},i.a.createElement("b",null,t.artist)),t.img&&i.a.createElement("img",{src:t.img.url,alt:"album",className:"image"}))}),g=function(e){var t=e.info,a=e.lat,n=e.lng;return i.a.createElement(A.a,{center:[a,n],radius:4,fill:!0,color:"#00ffff",fillColor:"#00ffff",fillOpacity:"0.75"},i.a.createElement(m.a,null,i.a.createElement(p,{info:t})))},f=function(e){var t=e.data,a=e.center,n=Object(o.useState)(13),r=Object(s.a)(n,1)[0];return i.a.createElement(l.a,{center:a,zoom:r},i.a.createElement(u.a,{url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png"}),t.map((function(e){return i.a.createElement(g,Object.assign({key:e.id},e))})))},d=(a(38),a(14)),h=a.n(d),w=function(){h.a.fire({icon:"error",title:"Oops...",text:"You need to give location permissions!",footer:'<a href="https://support.google.com/chrome/answer/114662">Why do I have this issue?</a>'})},E=a(25),v=a(24),b=a(15),B=(a(39),a(41),function(e){var t=(n=b.firestore()).collection("songs"),a=[];t.onSnapshot((function(t){t.docChanges().forEach((function(t){a=[].concat(Object(v.a)(a),[Object(E.a)({},t.doc.data(),{id:t.doc.id})]),e(a)}))}))}),S=function(e){n.collection("songs").add(e).then((function(){console.log("Document successfully written!")})).catch((function(e){console.error("Error writing document: ",e)}))},I=(a(45),function(){console.log("Version 4.1.2");var e=Object(o.useState)([]),t=Object(s.a)(e,2),a=t[0],n=t[1],r=Object(o.useState)([34.42,-119.99]),c=Object(s.a)(r,2),l=c[0],u=c[1],A=Object(o.useState)(!0),m=Object(s.a)(A,2);m[0],m[1];return Object(o.useEffect)((function(){var e=new URLSearchParams(window.location.search);navigator.geolocation.getCurrentPosition((function(t){u([t.coords.latitude,t.coords.longitude]),function(e,t){fetch("https://spotimaps.appspot.com/token?code="+e).then((function(e){return e.json()})).then((function(e){var a=new Headers;a.append("Authorization","Bearer "+e.access_token),fetch("https://api.spotify.com/v1/me/player/currently-playing",{method:"GET",headers:a,redirect:"follow"}).then((function(e){return e.json()})).then((function(e){S({info:{name:e.item.name,audio:e.item.preview_url,img:e.item.album.images[0],artist:e.item.artists[0].name},lat:t.coords.latitude,lng:t.coords.longitude})}))}))}(e.get("code"),t)}),w),B(n),null===e.get("code")&&h.a.fire({html:'\n<div class="start-modal--wrapper">\n    <h1>Welcome to Spotimaps!</h1>\n    <img src="./img1.png" style="width:100%; margin: 0 auto;"> <br/>\n    Click around to see what people are listening to and Login with Spotify to add your own! <br/>\n</div>\n',confirmButtonText:"Log into Spotify",showCancelButton:!0}).then((function(e){e.value&&(window.location.href="https://spotimaps.appspot.com/login")}))}),[]),i.a.createElement("div",{className:"site-wrapper"},i.a.createElement(f,{data:a,center:l}))});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));b.initializeApp({apiKey:"AIzaSyBwYM4XJ0a_SwikgEaAXFIm5WCvG4x623k",authDomain:"spotimaps-44ae9.firebaseapp.com",databaseURL:"https://spotimaps-44ae9.firebaseio.com",projectId:"spotimaps-44ae9",storageBucket:"spotimaps-44ae9.appspot.com",messagingSenderId:"230927739844",appId:"1:230927739844:web:819c98bc082e1bd1015291",measurementId:"G-4D8G2Y42EX"}),c.a.render(i.a.createElement(I,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[27,1,2]]]);
//# sourceMappingURL=main.cd2094d5.chunk.js.map